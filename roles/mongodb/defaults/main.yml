# Copyright (c) 2024, Itential, Inc
# GNU General Public License v3.0+ (see LICENSE or https://www.gnu.org/licenses/gpl-3.0.txt)
---
# Default port
mongodb_port: 27017

# Feature flags that can be overriden in the hosts file
# Essentially, a default installation will not have replication, authorization,
# or TLS settings applied.
mongodb_replication: false
mongodb_auth: false
mongodb_tls: false

# Default database names in MongoDB
mongodb_itential_db_name: itential
mongodb_admin_db_name: admin
# mongodb_localaaa_db_name: LocalAAA

# Default mongo connection string. This can be overridden if a customer brings
# their own mongo database.
mongodb_itential_connection_string: "mongodb://{{ inventory_hostname }}:{{ mongodb_port }}/{{ mongodb_itential_db_name }}"
mongodb_admin_connection_string: "mongodb://{{ inventory_hostname }}:{{ mongodb_port }}/{{ mongodb_admin_db_name }}"
# mongodb_localaaa_connection_string: "mongodb://{{ mongodb_host }}:{{ mongodb_port }}/{{ mongodb_localaaa_db_name }}"

# Default mongo user passwords
# These are meant to be changed by the customer. By default they are meant to
# be predictable and simple.
mongodb_user_admin_password: admin
mongodb_user_itential_password: itential
# mongodb_user_localaaa_password: localaaa

# The name of the mongo replica set
mongodb_replset_name: rs0

mongodb_release_url: "https://repo.mongodb.org/yum/redhat/$releasever/mongodb-org/{{ mongodb_version }}/$basearch/"
mongodb_gpgkey_url: "https://www.mongodb.org/static/pgp/server-{{ mongodb_version }}.asc"

# Location of mongo conf file
mongodb_conf_file: /etc/mongod.conf

# Directory that stores mongodb data files
mongodb_data_dir: /var/lib/mongo

# Target path for writing mongodb log files
mongodb_log_dir: /var/log/mongodb

# Directory that stores the mongodb pid file
mongodb_pid_dir: /var/run/mongodb

# The Mongo user and group
mongodb_owner: mongod
mongodb_group: mongod

# Flag to enable/disable IPv6
mongodb_bind_ipv6: true

# The hostnames and/or IP addresses and/or full Unix domain socket paths on
# which mongos or mongod should listen for client connections. You may attach
# mongos or mongod to any interface. To bind to multiple addresses, enter a
# list of comma-separated values.
#
# The inventory_hostname will be automatically added to mongodb_bind_addrs.
#
# If mongodb_bind_ipv6 is set to true, '::1' will be added to mongodb_bind_addrs.
mongodb_bind_addrs: 127.0.0.1

# The mongodb role uses the system python3 executables.
# MondoDB doesn't require Python or pymongo, but the community.mongodb.mongodb_user
# role does. The pymongo wheel is defined in the mongodb_python_dependecies
# variable in the vars directory.
mongodb_python_executable: /usr/bin/python3
mongodb_pip_executable: /usr/bin/pip3

# To isolate Python, a virtual environment is used.
mongodb_python_venv_root: /var/tmp
mongodb_python_venv_name: mongodb_venv
mongodb_python_venv: "{{ mongodb_python_venv_root }}/{{ mongodb_python_venv_name }}"

# Offline install settings
# Refer to the offline variables in common_vars for additional settings
mongodb_packages_path: "{{ itential_packages_path }}/{{ iap_release }}/mongodb"

# The base directory for SSL certs and key files
mongodb_ssl_root_dir: /etc/ssl

# Key file destination location
# The key file is used to authenticate members of a replica set
mongodb_auth_keyfile_destination: "{{ mongodb_ssl_root_dir }}/mongodb/mongo-replicaset-key.pem"

# Destination location of the certificate key file used for TLS connections
mongodb_cert_keyfile_destination: "{{ mongodb_ssl_root_dir }}/mongodb/mongo-certificate.pem"

# Destination location of the CA root file used for TLS connections
mongodb_root_ca_file_destination: "{{ mongodb_ssl_root_dir }}/mongodb/mongo-rootCA.pem"
